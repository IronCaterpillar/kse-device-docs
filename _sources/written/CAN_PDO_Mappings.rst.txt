.. include:: substitutions.rst

Распределение параметров PDO
==============================

.. attention::

    В PDO дочерних плат, где идёт ссылка на ошибки первой платы имеются ввиду ошибки соответствующей платы(0-8, Ext IO)

Общие положения
------------------------------

* Плате счётчика (PM) выделено 6 PDO;
* Головной плате выделен дополнительный PDO (TPDO7);
* Для каждого PDO, кроме головных, используется 2 маппинга.

Для |MCU_T|:

* Каждой плате IO выделено 8 PDO: 1 TPDO для статусов, 7 для TPDO и 1 для RPDO;
* Плату счётчика электроэнергии можно устанавливать только в первую позицию;

Для |MCU_M|,  ... :

* Первой плате выделенно 8 PDO: 1 TPDO для статусов, 7 для TPDO и 1 для RPDO;
* Остальным платам IO выделено 5 PDO: 4 для TPDO и 1 для RPDO;


Содержание PDO по платам
------------------------------

Головная плата
~~~~~~~~~~~~~~~~~~
.. note::

    Если плата является первой, то присутствует PDO 7


.. table:: |MCU_T| PDO 7(NODE-ID+0x400)

    +----------------+--------------------------------------------------+
    | Бит            | Назначение                                       |
    +================+==================================================+
    | 0-7            | Ошибки устройства из :ref:`subtable1001`         |
    +----------------+--------------------------------------------------+
    | 8	             | Ошибка платы 1 :ref:`subtable4001`               |
    +----------------+--------------------------------------------------+
    | 9	             | Ошибка платы 2 :ref:`subtable4101`               |
    +----------------+--------------------------------------------------+
    | 10             | Ошибка платы 3 :ref:`subtable4201`               |
    +----------------+--------------------------------------------------+
    | 11             | Ошибка платы 4 :ref:`subtable4301`               |
    +----------------+--------------------------------------------------+
    | 12             | Ошибка платы 5 :ref:`subtable4401`               |
    +----------------+--------------------------------------------------+
    | 13             | Ошибка платы 6 :ref:`subtable4501`               |
    +----------------+--------------------------------------------------+
    | 14             | Ошибка платы 7 :ref:`subtable4601`               |
    +----------------+--------------------------------------------------+
    | 15             | Ошибка платы 8 :ref:`subtable4701`               |
    +----------------+--------------------------------------------------+
    | 16-31          | DI 1-16 головной платы :ref:`subtable3F10`       |
    +----------------+--------------------------------------------------+
    | 32-63          | Reserved                                         |
    +----------------+--------------------------------------------------+

.. table:: |MCU_M| PDO 7(NODE-ID+0x400)

    +----------------+--------------------------------------------------+
    | Бит            | Назначение                                       |
    +================+==================================================+
    | 0-7            | Ошибки устройства из :ref:`subtable1001`         |
    +----------------+--------------------------------------------------+
    | 8	             | Ошибка платы 1 :ref:`subtable4001`               |
    +----------------+--------------------------------------------------+
    | 9	             | Ошибка платы 2 :ref:`subtable4101`               |
    +----------------+--------------------------------------------------+
    | 10             | Ошибка платы 3 :ref:`subtable4201`               |
    +----------------+--------------------------------------------------+
    | 11             | Ошибка платы 4 :ref:`subtable4301`               |
    +----------------+--------------------------------------------------+
    | 12             | Ошибка платы 5 :ref:`subtable4401`               |
    +----------------+--------------------------------------------------+
    | 13             | Ошибка платы 6 :ref:`subtable4501`               |
    +----------------+--------------------------------------------------+
    | 14-29          | DI 1-16 головной платы :ref:`subtable3F10`       |
    +----------------+--------------------------------------------------+
    | 30-63          | Reserved                                         |
    +----------------+--------------------------------------------------+


Отображение параметров плат DI в PDO
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

TPDO
""""""""""

.. table:: PDO 1(NODE-ID+0x180)

    +----------------+---------------------------------------------------+
    | Бит            | Назначение                                        |
    +================+===================================================+
    | 0-15           | DI 1-16 из :ref:`subtable4010`                    |
    +----------------+---------------------------------------------------+
    | 16-23          | Ошибки платы(Board Errors) из :ref:`subtable4001` |
    +----------------+---------------------------------------------------+
    | 24-63          | Reserved                                          |
    +----------------+---------------------------------------------------+

RPDO
""""""""""
Отсутствуют.


Отображение параметров плат DO в PDO
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

TPDO
""""""""""
.. table:: PDO 1 (NODE-ID+0x180)

    +----------------+--------------------------------------------------+
    | Бит            | Назначение                      	                |
    +================+==================================================+
    | 0-15           | DO 1-16 из :ref:`subtable4020`                   |
    +----------------+--------------------------------------------------+
    | 16-23          | Ошибки платы(Board Errors) из :ref:`subtable4001`|
    +----------------+--------------------------------------------------+
    | 24-63          | Reserved	                                        |
    +----------------+--------------------------------------------------+

RPDO
""""""""""
.. table:: PDO 8(NODE-ID+0x500)

    +----------------+---------------------------------+
    | Бит            | Назначение                      |
    +================+=================================+
    | 0-15           | DO 1-16 из :ref:`subtable4020`  |
    +----------------+---------------------------------+
    | 16-63          | Reserved                        |
    +----------------+---------------------------------+


Отображение параметров плат AI в PDO
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

TPDO
""""""""""
.. table:: PDO 1(NODE-ID+0x180)

    +----------------+---------------------------------+
    | Бит            | Назначение                      |
    +================+=================================+
    | 0-31           | AI 1 из :ref:`subtable4031`     |
    +----------------+---------------------------------+
    | 32-63          | AI 2 из :ref:`subtable4031`     |
    +----------------+---------------------------------+

--------


.. table:: PDO 2(NODE-ID+0x280)

    +----------------+---------------------------------+
    | Бит            | Назначение                      |
    +================+=================================+
    | 0-31           | AI 3 из :ref:`subtable4031`     |
    +----------------+---------------------------------+
    | 32-63          | AI 4 из :ref:`subtable4031`     |
    +----------------+---------------------------------+

--------


.. table:: PDO 3(NODE-ID+0x380) (только для плат с 8 входами)

    +----------------+---------------------------------+
    | Бит            | Назначение                      |
    +================+=================================+
    | 0-31           | AI 5 из :ref:`subtable4031`     |
    +----------------+---------------------------------+
    | 32-63          | AI 6 из :ref:`subtable4031`     |
    +----------------+---------------------------------+

--------


.. table:: PDO 4(NODE-ID+0x480)  (только для плат с 8 входами)

    +----------------+---------------------------------+
    | Бит            | Назначение                      |
    +================+=================================+
    | 0-31           | AI 7 из :ref:`subtable4031`     |
    +----------------+---------------------------------+
    | 32-63          | AI 8 из :ref:`subtable4031`     |
    +----------------+---------------------------------+

RPDO
""""""""""
Отсутствуют.


Отображение параметров плат AO в PDO
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

TPDO
"""""""""

.. table:: PDO 1(NODE-ID+0x180)

    +----------------+---------------------------------+
    | Бит            | Назначение                      |
    +================+=================================+
    | 0-31           | AO 1 из :ref:`subtable4041`     |
    +----------------+---------------------------------+
    | 32-63          | AO 2 из :ref:`subtable4041`     |
    +----------------+---------------------------------+

--------

.. table:: PDO 1(NODE-ID+0x280)

    +----------------+---------------------------------------------------+
    | Бит            | Назначение                                        |
    +================+===================================================+
    | 0-8            | Ошибки платы (Board Errors) из :ref:`subtable4001`|
    +----------------+---------------------------------------------------+
    | 9-63           | Reserved                        	                 |
    +----------------+---------------------------------------------------+


RPDO
""""""""""
.. table:: PDO 8(NODE-ID+0x500)

    +----------------+---------------------------------+
    | Бит            | Назначение                      |
    +================+=================================+
    | 0-31           | AO 1 из :ref:`subtable4041`     |
    +----------------+---------------------------------+
    | 32-63          | AO 2 из :ref:`subtable4041`     |
    +----------------+---------------------------------+

Отображение параметров плат PM в PDO
~~~~~~~~

TPDO
""""""""""
.. table:: PDO 1(NODE-ID+0x180)

    +----------------+---------------------------------+
    | Бит            | Назначение                      |
    +================+=================================+
    | 0-31           | IA из :ref:`subtable4064`       |
    +----------------+---------------------------------+
    | 32-63          | UA из :ref:`subtable4065`       |
    +----------------+---------------------------------+

--------


.. table:: PDO 2(NODE-ID+0x280)

    +----------------+---------------------------------+
    | Бит            | Назначение                      |
    +================+=================================+
    | 0-31           | IB из :ref:`subtable4064`       |
    +----------------+---------------------------------+
    | 32-63          | UB из :ref:`subtable4065`       |
    +----------------+---------------------------------+

--------


.. table:: PDO 3(NODE-ID+0x180)

    +----------------+---------------------------------+
    | Бит            | Назначение                      |
    +================+=================================+
    | 0-31           | IC из :ref:`subtable4064`       |
    +----------------+---------------------------------+
    | 32-63          | UC из :ref:`subtable4065`       |
    +----------------+---------------------------------+

--------


.. table:: PDO 4(NODE-ID+0x280)

    +----------------+---------------------------------+
    | Бит            | Назначение                      |
    +================+=================================+
    | 0-31           | PFA из :ref:`subtable4066`      |
    +----------------+---------------------------------+
    | 32-63          | PFB из :ref:`subtable4066`      |
    +----------------+---------------------------------+

--------


.. table:: PDO 5(NODE-ID+0x200)

    +----------------+---------------------------------+
    | Бит            | Назначение                      |
    +================+=================================+
    | 0-31           | PFC из :ref:`subtable4066`      |
    +----------------+---------------------------------+
    | 32-63          | F из :ref:`subtable4068`        |
    +----------------+---------------------------------+

--------


.. table:: PDO 6(NODE-ID+0x300)

    +----------------+---------------------------------+
    | Бит            | Назначение                      |
    +================+=================================+
    | 0-31           | W*h Sum                         |
    +----------------+---------------------------------+
    | 32-63          | Var*h Sum                       |
    +----------------+---------------------------------+


RPDO
""""""""""
Отсутствуют.

