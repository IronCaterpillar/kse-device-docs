Принцип отображения словаря устройства в адресное пространство протокола *Modbus*
=================================================================================

Адресное пространство протокола *Modbus* формируется "на лету" по запросу. Настройка отображения адресного пространства внутреннего словаря в адресное пространство протокола *Modbus* осуществляется с помощью файла "modbus_mapping.cfg", находящегося в корне файловой системы. Настройка одного отображения осуществляется следующим образом:

.. math::
	ABCD=0xZXCV[Y]:X

, где *ABCD* - адрес *Modbus* в **десятичной** форме, нумерация с единицы, *0xZXCV* - индекс внутреннего словаря объектов устройства в **шестнадцатиричной** форме, *Y* - начальный субиндекс, X - количество субиндексов, которые надо отобразить. Количество занимаемых регистров *Modbus* рассчитывается автоматически. Необходимо учитывать, что в адресном пространстве *Modbus* адресация ведётся в 16-битных регистрах, то есть если происходит отображение данных типа *bool*, то каждый субиндекс займёт один регистр, если же происходит отображения данных типа *UINT64*, то один субиндекс займёт 4 регистра *Modbus*.

.. note::
	На данный момент поддерживается отображение только в **Holding** **Registers**, что соответствует *Modbus* функциям **3**, **6** и **16**.

.. attention::
	Изменившийся файл *modbus_mappings.cfg* применяется только после перезагрузки устройства

.. attention::
	Нумерация регистров протокола Modbus ведётся **с** **единицы**

